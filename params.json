{"name":"Taskcluster-client-go","tagline":"A go (golang) port of taskcluster-client","body":"# taskcluster-client.go\r\n<img hspace=\"20\" align=\"left\" src=\"https://tools.taskcluster.net/lib/assets/taskcluster-120.png\" />\r\n[![Build Status](https://secure.travis-ci.org/petemoore/taskcluster-client-go.png)](http://travis-ci.org/petemoore/taskcluster-client-go)\r\n\r\nA go (golang) port of taskcluster-client\r\n\r\n\r\n\r\n\r\nTo see the client in action, try something like this:\r\n\r\n```\r\npackage main\r\n\r\nimport (\r\n\t\"fmt\"\r\n\t\"github.com/petemoore/taskcluster-client-go/client\"\r\n)\r\n\r\nfunc main() {\r\n\tauthApi := client.NewAuthAPI(\"hhskdjg476fau1ie1b29tQ\", \"3W_Lrghkjsdfn467834kgf0SRnKRiWSaKF9urnwGaX5Q\")\r\n\tscopes, _ := authApi.Scopes(\"hdjskhfb4nvrh673g4mvfd\")\r\n\tfmt.Printf(\"Client ID: %v\\n\", scopes.ClientId)\r\n\tfmt.Printf(\"Expires:   %v\\n\", scopes.Expires)\r\n\tfmt.Printf(\"Scopes:    %v\\n\", scopes.Scopes)\r\n}\r\n```\r\n\r\nWith suitable/valid authorization parameters provided, this should return content like:\r\n\r\n```\r\npmoore@Elisandra:~/go/src/github.com/petemoore/taskcluster-client-go master $ hack\r\nClient ID:    hdjhtkehgfgdhrb437f$2h\r\nScopes:       [*]\r\nExpires:      2017-01-31T23:00:00.000Z\r\n```\r\n\r\nThe steps to call an API endpoint are:\r\n\r\n1. Choose which API you want to call. There are currently 6 available: https://github.com/petemoore/taskcluster-client-go/blob/master/model/apis.json\r\n2. Create a new API object based on your choice above, with appopriate clientId and accessToken (optionally you may change the API url and enable/disable authentication).\r\n3. Invoke one of the API methods available on the API object (see documentation, or enable code completion in your IDE)\r\n\r\nThe API method returns two values: a populated object with the resulting data, unmarshaled from the json response of the API endpoint, and a pointer to the http response object, in case you wish to perform deeper analysis of your result.\r\n\r\nCurrently the API calls do not return a reference to the API request sent, I am considering adding this too. Let me know your thoughts! Either return a struct with reference to the http request and http response, or return three values in the API methods. Neither solution seems completely attractive.\r\n\r\nHere is a slightly more involved example, pointing to an API endpoint on localhost, with authentication disabled (perhaps a taskcluster-proxy, or a dev environment) and calling an API method that requires a payload:\r\n\r\n```\r\npackage main\r\n\r\nimport (\r\n\t\"fmt\"\r\n\t\"github.com/petemoore/taskcluster-client-go/client\"\r\n)\r\n\r\nfunc main() {\r\n\tauthAPI := client.AuthAPI{}\r\n\tauthAPI.Authenticate = false\r\n\tauthAPI.BaseURL = \"http://localhost:1234/api/AuthAPI/v1\"\r\n\tclient, _ := authAPI.ModifyClient(\"gjhvsdfvrnbvsdvfkjhvds\", &client.GetClientCredentialsResponse1{Description: \"a nice client\", Expires: \"2016-06-07T13:23:55.213Z\", Name: \"pmoore_test\", Scopes: []string{\"*\"}})\r\n\tfmt.Printf(\"Access Token: %v\\n\", client.AccessToken)\r\n\tfmt.Printf(\"Client Id:    %v\\n\", client.ClientId)\r\n\tfmt.Printf(\"Description:  %v\\n\", client.Description)\r\n\tfmt.Printf(\"Expires:      %v\\n\", client.Expires)\r\n\tfmt.Printf(\"Name:         %v\\n\", client.Name)\r\n\tfmt.Printf(\"Scopes:       %v\\n\", client.Scopes)\r\n}\r\n```\r\n\r\nNotice the ModifyClient api call is passed a GetClientCredentialsResponse1 type, rather than a json string for the updated credentials. This guarantees that the structure of the input is correct. Of course if the input exists as json, it can first be unmarshaled into the required type prior to calling the API method.\r\n\r\nIn the above example, we discard the http response, by assiging the result to _.\r\n\r\nPlease note the full package documentation, including all API methods descriptions, is available at http://godoc.org/github.com/petemoore/taskcluster-client-go/client.\r\n\r\nTravis build success/failure messages are posted to irc channel #tcclient-go on irc.mozilla.org:6697.\r\n","google":"","note":"Don't delete this file! It's used internally to help with page regeneration."}